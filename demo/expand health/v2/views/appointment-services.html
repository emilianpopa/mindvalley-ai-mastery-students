<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Appointment Services - ExpandHealth</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cline x1='20' y1='20' x2='80' y2='80' stroke='%230F766E' stroke-width='12' stroke-linecap='round'/%3E%3Cline x1='80' y1='20' x2='20' y2='80' stroke='%230F766E' stroke-width='12' stroke-linecap='round'/%3E%3C/svg%3E">
  <link rel="stylesheet" href="/css/main.css">
  <script src="/js/feature-flags.js"></script>
  <script src="/js/nav.js"></script>
  <style>
    .main-content {
      flex: 1;
      margin-left: 260px;
      padding: 24px 32px;
      overflow-y: auto;
      background: #f8f9fa;
    }

    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }

    .page-header h1 {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--gray-900);
    }

    .create-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      background: var(--teal-600);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
    }

    .create-btn:hover {
      background: var(--teal-700);
    }

    .create-btn svg {
      width: 18px;
      height: 18px;
    }

    /* Tabs */
    .tabs-container {
      background: white;
      border-radius: 12px;
      border: 1px solid var(--gray-200);
    }

    .tab-nav {
      display: flex;
      gap: 4px;
      padding: 16px 20px;
      border-bottom: 1px solid var(--gray-200);
    }

    .tab-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background: none;
      border: none;
      font-size: 0.875rem;
      color: var(--gray-600);
      cursor: pointer;
      border-radius: 6px;
    }

    .tab-btn:hover {
      background: var(--gray-50);
      color: var(--gray-900);
    }

    .tab-btn.active {
      background: var(--teal-50);
      color: var(--teal-700);
      font-weight: 500;
    }

    .tab-btn svg {
      width: 16px;
      height: 16px;
    }

    /* Search and Actions */
    .toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 1px solid var(--gray-200);
    }

    .search-box {
      position: relative;
      width: 280px;
    }

    .search-box input {
      width: 100%;
      padding: 8px 12px 8px 36px;
      border: 1px solid var(--gray-300);
      border-radius: 8px;
      font-size: 0.875rem;
    }

    .search-box input:focus {
      outline: none;
      border-color: var(--teal-500);
    }

    .search-box svg {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      width: 16px;
      height: 16px;
      color: var(--gray-400);
    }

    .toolbar-actions {
      display: flex;
      gap: 12px;
    }

    .toolbar-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      background: white;
      border: 1px solid var(--gray-300);
      border-radius: 8px;
      font-size: 0.875rem;
      color: var(--gray-700);
      cursor: pointer;
    }

    .toolbar-btn:hover {
      background: var(--gray-50);
    }

    .toolbar-btn svg {
      width: 16px;
      height: 16px;
    }

    /* Services Table */
    .services-table {
      width: 100%;
    }

    .services-table th {
      text-align: left;
      padding: 12px 20px;
      font-size: 0.75rem;
      font-weight: 500;
      color: var(--gray-500);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      border-bottom: 1px solid var(--gray-200);
    }

    .services-table td {
      padding: 16px 20px;
      font-size: 0.875rem;
      color: var(--gray-700);
      border-bottom: 1px solid var(--gray-100);
    }

    .services-table tr:hover {
      background: var(--gray-50);
    }

    .services-table tr:last-child td {
      border-bottom: none;
    }

    .service-name-cell {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .service-color {
      width: 16px;
      height: 16px;
      border-radius: 4px;
      flex-shrink: 0;
    }

    .service-name {
      color: var(--gray-900);
      text-decoration: none;
      font-weight: 500;
    }

    .service-name:hover {
      color: var(--teal-600);
    }

    .service-lock {
      width: 14px;
      height: 14px;
      color: var(--gray-400);
      margin-left: 4px;
    }

    .service-actions {
      display: flex;
      justify-content: flex-end;
    }

    .service-action-btn {
      padding: 6px;
      background: none;
      border: none;
      cursor: pointer;
      color: var(--gray-400);
    }

    .service-action-btn:hover {
      color: var(--gray-600);
    }

    /* Service Action Menu */
    .service-menu {
      position: absolute;
      right: 0;
      top: 100%;
      background: white;
      border: 1px solid var(--gray-200);
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      min-width: 200px;
      z-index: 1000;
      padding: 8px 0;
    }

    .service-menu-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 16px;
      cursor: pointer;
      font-size: 0.875rem;
      color: var(--gray-700);
      transition: background 0.15s;
    }

    .service-menu-item:hover {
      background: var(--gray-50);
    }

    .service-menu-item svg {
      width: 16px;
      height: 16px;
      color: var(--gray-500);
    }

    .service-menu-item.danger {
      color: #EF4444;
    }

    .service-menu-item.danger svg {
      color: #EF4444;
    }

    .service-menu-divider {
      height: 1px;
      background: var(--gray-200);
      margin: 8px 0;
    }

    .service-actions {
      position: relative;
    }

    /* Pagination */
    .pagination {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 16px;
      padding: 16px 20px;
      border-top: 1px solid var(--gray-200);
    }

    .pagination-info {
      font-size: 0.875rem;
      color: var(--gray-600);
    }

    .pagination-btns {
      display: flex;
      gap: 8px;
    }

    .pagination-btn {
      padding: 6px 10px;
      background: none;
      border: 1px solid var(--gray-300);
      border-radius: 6px;
      cursor: pointer;
      color: var(--gray-600);
    }

    .pagination-btn:hover:not(:disabled) {
      background: var(--gray-50);
    }

    .pagination-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .pagination-btn svg {
      width: 16px;
      height: 16px;
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
    }

    .empty-state svg {
      width: 48px;
      height: 48px;
      color: var(--gray-300);
      margin-bottom: 16px;
    }

    .empty-state h3 {
      font-size: 1rem;
      color: var(--gray-900);
      margin-bottom: 8px;
    }

    .empty-state p {
      font-size: 0.875rem;
      color: var(--gray-600);
    }

    /* Sidebar Nav - Updated for Appointments dropdown */
    .sidebar {
      width: 260px;
      height: 100vh;
      background: #ffffff;
      border-right: 1px solid #e5e7eb;
      position: fixed;
      left: 0;
      top: 0;
      display: flex;
      flex-direction: column;
      z-index: 100;
    }

    .sidebar-header {
      padding: 16px 20px;
      border-bottom: 1px solid #e5e7eb;
    }

    .sidebar-brand {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
    }

    .sidebar-logo {
      width: 32px;
      height: 32px;
    }

    .sidebar-title {
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--gray-900);
    }

    .sidebar-nav {
      flex: 1;
      overflow-y: auto;
      padding: 12px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 12px;
      color: var(--gray-600);
      text-decoration: none;
      font-size: 0.875rem;
      border-radius: 8px;
      margin-bottom: 2px;
    }

    .nav-item:hover {
      background: var(--gray-50);
      color: var(--gray-900);
    }

    .nav-item.active {
      background: var(--teal-50);
      color: var(--teal-700);
    }

    .nav-item svg {
      width: 20px;
      height: 20px;
    }

    .nav-dropdown {
      margin-bottom: 2px;
    }

    .nav-dropdown-trigger {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 12px;
      color: var(--gray-600);
      font-size: 0.875rem;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
    }

    .nav-dropdown-trigger:hover {
      background: var(--gray-50);
      color: var(--gray-900);
    }

    .nav-dropdown-trigger svg:first-child {
      width: 20px;
      height: 20px;
    }

    .nav-dropdown-trigger span {
      flex: 1;
    }

    .nav-dropdown-arrow {
      width: 16px;
      height: 16px;
      transition: transform 0.2s;
    }

    .nav-dropdown.open .nav-dropdown-arrow {
      transform: rotate(90deg);
    }

    .nav-dropdown.open .nav-dropdown-trigger {
      background: var(--teal-50);
      color: var(--teal-700);
    }

    .nav-dropdown-menu {
      display: none;
      padding: 4px 0 4px 32px;
    }

    .nav-dropdown.open .nav-dropdown-menu {
      display: block;
    }

    .nav-dropdown-header {
      font-size: 0.625rem;
      font-weight: 600;
      color: var(--gray-400);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      padding: 8px 12px 4px;
    }

    .nav-dropdown-item {
      display: block;
      padding: 8px 12px;
      color: var(--gray-600);
      text-decoration: none;
      font-size: 0.8125rem;
      border-radius: 6px;
    }

    .nav-dropdown-item:hover {
      background: var(--gray-50);
      color: var(--gray-900);
    }

    .nav-dropdown-item.active {
      color: var(--teal-600);
      font-weight: 500;
    }

    .sidebar-footer {
      padding: 12px;
      border-top: 1px solid #e5e7eb;
    }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <a href="/dashboard" class="sidebar-brand">
        <svg class="sidebar-logo" viewBox="0 0 100 100">
          <line x1="20" y1="20" x2="80" y2="80" stroke="#0F766E" stroke-width="12" stroke-linecap="round"/>
          <line x1="80" y1="20" x2="20" y2="80" stroke="#0F766E" stroke-width="12" stroke-linecap="round"/>
        </svg>
        <span class="sidebar-title">Expand Health</span>
      </a>
    </div>
    <nav class="sidebar-nav">
      <a href="/dashboard" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
        <span>Dashboard</span>
      </a>
      <a href="/clients" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
        <span>Clients</span>
      </a>
      <div class="nav-section-title">AI ADMIN</div>
      <a href="/forms" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 11l3 3L22 4"></path><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>
        <span>Forms</span>
      </a>
      <a href="/protocol-templates" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
        <span>Protocol Templates</span>
      </a>
      <a href="/admin" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
        <span>Admin Settings</span>
      </a>
      <a href="/kb-admin" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
        <span>AI Knowledge Base</span>
      </a>
      <div class="nav-section-title">BOOKING</div>
      <a href="/inbox" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
        <span>Inbox</span>
      </a>
      <a href="/pos" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>
        <span>Point of sale</span>
      </a>
      <a href="/classes" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
        <span>Classes</span>
      </a>
      <div class="nav-dropdown open">
        <div class="nav-dropdown-trigger">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
          <span>Appointments</span>
          <svg class="nav-dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg>
        </div>
        <div class="nav-dropdown-menu">
          <div class="nav-dropdown-header">APPOINTMENTS</div>
          <a href="/appointments" class="nav-dropdown-item">Schedule</a>
          <a href="/reservations" class="nav-dropdown-item">Reservations</a>
          <a href="/services" class="nav-dropdown-item active">Services & add-ons</a>
          <a href="/boards" class="nav-dropdown-item">Boards</a>
        </div>
      </div>
      <a href="/community" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
        <span>Community</span>
      </a>
      <a href="/on-demand" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
        <span>On-Demand</span>
      </a>
      <a href="/memberships" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
        <span>Memberships</span>
      </a>
      <a href="/customers" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
        <span>Customers</span>
      </a>
      <a href="/marketing" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"></path></svg>
        <span>Marketing</span>
      </a>
      <a href="/analytics" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
        <span>Analytics</span>
      </a>
      <a href="/financials" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>
        <span>Financials</span>
      </a>
      <a href="/studio-setup" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
        <span>Studio set-up</span>
      </a>
      <a href="/integrations" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line></svg>
        <span>Apps & Integrations</span>
      </a>
    </nav>
    <div class="sidebar-footer">
      <a href="/settings" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
        <span>Settings</span>
      </a>
    </div>
  </aside>

  <div class="main-content">
    <!-- Page Header -->
    <div class="page-header">
      <h1>Appointment services</h1>
      <button class="create-btn" onclick="createService()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        Create service
      </button>
    </div>

    <!-- Tabs Container -->
    <div class="tabs-container">
      <!-- Tab Navigation -->
      <div class="tab-nav">
        <button class="tab-btn active" data-tab="services">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
          </svg>
          Services
        </button>
        <button class="tab-btn" data-tab="categories">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
          </svg>
          Categories
        </button>
        <button class="tab-btn" data-tab="addons">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="4" y1="21" x2="4" y2="14"></line>
            <line x1="4" y1="10" x2="4" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12" y2="3"></line>
            <line x1="20" y1="21" x2="20" y2="16"></line>
            <line x1="20" y1="12" x2="20" y2="3"></line>
          </svg>
          Add-ons
        </button>
        <button class="tab-btn" data-tab="price-levels">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="1" x2="12" y2="23"></line>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
          </svg>
          Price levels
        </button>
      </div>

      <!-- Toolbar -->
      <div class="toolbar">
        <div class="search-box">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
          <input type="text" id="searchInput" placeholder="Search services..." onkeyup="filterServices()">
        </div>
        <div class="toolbar-actions">
          <button class="toolbar-btn" onclick="editOrder()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <line x1="3" y1="12" x2="21" y2="12"></line>
              <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
            Edit order
          </button>
          <button class="toolbar-btn" onclick="openOptions()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"></circle>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
            </svg>
            Options
          </button>
        </div>
      </div>

      <!-- Services Table -->
      <table class="services-table" id="servicesTable">
        <thead>
          <tr>
            <th style="width: 50%;">Name</th>
            <th>Price</th>
            <th>Duration</th>
            <th>Category</th>
            <th style="width: 40px;"></th>
          </tr>
        </thead>
        <tbody id="servicesTableBody">
          <!-- Services will be populated here -->
        </tbody>
      </table>

      <!-- Empty State (hidden by default) -->
      <div class="empty-state" id="emptyState" style="display: none;">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
        <h3>No services found</h3>
        <p>Create your first service to get started.</p>
      </div>

      <!-- Pagination -->
      <div class="pagination" id="pagination">
        <span class="pagination-info" id="paginationInfo">1 of 1</span>
        <div class="pagination-btns">
          <button class="pagination-btn" id="prevBtn" disabled onclick="prevPage()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
          </button>
          <button class="pagination-btn" id="nextBtn" onclick="nextPage()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    let allServices = [];
    let filteredServices = [];
    let currentPage = 1;
    const pageSize = 20;

    // Load services on page load
    async function loadServices() {
      try {
        const token = localStorage.getItem('auth_token');
        const response = await fetch('/api/services', {
          headers: {
            'Authorization': `Bearer ${token}`
          }
        });

        if (!response.ok) {
          throw new Error('Failed to load services');
        }

        allServices = await response.json();
        filteredServices = [...allServices];
        renderServices();
      } catch (error) {
        console.error('Error loading services:', error);
      }
    }

    function renderServices() {
      const tbody = document.getElementById('servicesTableBody');
      const emptyState = document.getElementById('emptyState');
      const table = document.getElementById('servicesTable');
      const pagination = document.getElementById('pagination');

      if (filteredServices.length === 0) {
        tbody.innerHTML = '';
        table.style.display = 'none';
        pagination.style.display = 'none';
        emptyState.style.display = 'block';
        return;
      }

      table.style.display = 'table';
      pagination.style.display = 'flex';
      emptyState.style.display = 'none';

      // Pagination
      const totalPages = Math.ceil(filteredServices.length / pageSize);
      const start = (currentPage - 1) * pageSize;
      const end = start + pageSize;
      const pageServices = filteredServices.slice(start, end);

      document.getElementById('paginationInfo').textContent = `${currentPage} of ${totalPages}`;
      document.getElementById('prevBtn').disabled = currentPage === 1;
      document.getElementById('nextBtn').disabled = currentPage === totalPages;

      tbody.innerHTML = '';

      pageServices.forEach(service => {
        const row = document.createElement('tr');
        row.style.cursor = 'pointer';
        row.onclick = function(e) {
          // Don't navigate if clicking on the action button
          if (e.target.closest('.service-actions')) return;
          window.location.href = `/service-detail?id=${service.id}`;
        };
        const price = service.price ? `ZAR ${parseFloat(service.price).toLocaleString('en-ZA', { minimumFractionDigits: 2 })}` : 'ZAR 0.00';
        const duration = service.duration_minutes ? `${service.duration_minutes}m` : '-';
        const category = service.category_name || '';

        row.innerHTML = `
          <td>
            <div class="service-name-cell">
              <div class="service-color" style="background: ${service.color || '#0d9488'}"></div>
              <span class="service-name">${service.name}</span>
              ${service.requires_staff === false ? '<svg class="service-lock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>' : ''}
            </div>
          </td>
          <td>${price}</td>
          <td>${duration}</td>
          <td>${category}</td>
          <td class="service-actions">
            <button class="service-action-btn" onclick="openServiceMenu(${service.id}, event)">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px;">
                <circle cx="12" cy="12" r="1"/>
                <circle cx="19" cy="12" r="1"/>
                <circle cx="5" cy="12" r="1"/>
              </svg>
            </button>
          </td>
        `;
        tbody.appendChild(row);
      });
    }

    function filterServices() {
      const query = document.getElementById('searchInput').value.toLowerCase();
      filteredServices = allServices.filter(service =>
        service.name.toLowerCase().includes(query) ||
        (service.category && service.category.toLowerCase().includes(query))
      );
      currentPage = 1;
      renderServices();
    }

    function prevPage() {
      if (currentPage > 1) {
        currentPage--;
        renderServices();
      }
    }

    function nextPage() {
      const totalPages = Math.ceil(filteredServices.length / pageSize);
      if (currentPage < totalPages) {
        currentPage++;
        renderServices();
      }
    }

    function createService() {
      alert('Create service functionality coming soon');
    }

    function editOrder() {
      alert('Edit order functionality coming soon');
    }

    function openOptions() {
      alert('Options functionality coming soon');
    }

    let activeMenu = null;

    function openServiceMenu(serviceId, event) {
      event.stopPropagation();

      // Close any existing menu
      closeServiceMenu();

      const btn = event.currentTarget;
      const cell = btn.closest('td');

      // Create menu
      const menu = document.createElement('div');
      menu.className = 'service-menu';
      menu.innerHTML = `
        <div class="service-menu-item" onclick="viewServiceDetail(${serviceId})">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="16" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12.01" y2="8"></line>
          </svg>
          <span>Detail</span>
        </div>
        <div class="service-menu-item" onclick="editService(${serviceId})">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
          </svg>
          <span>Edit</span>
        </div>
        <div class="service-menu-item" onclick="editServiceTags(${serviceId})">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
            <line x1="7" y1="7" x2="7.01" y2="7"></line>
          </svg>
          <span>Edit tags</span>
        </div>
        <div class="service-menu-item" onclick="duplicateService(${serviceId})">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
          </svg>
          <span>Duplicate</span>
        </div>
        <div class="service-menu-divider"></div>
        <div class="service-menu-item" onclick="moveToCategory(${serviceId})">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
          </svg>
          <span>Move to category</span>
        </div>
        <div class="service-menu-item" onclick="removeFromCategory(${serviceId})">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
            <line x1="9" y1="14" x2="15" y2="14"></line>
          </svg>
          <span>Remove from category</span>
        </div>
        <div class="service-menu-divider"></div>
        <div class="service-menu-item danger" onclick="deleteService(${serviceId})">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="3 6 5 6 21 6"></polyline>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
          </svg>
          <span>Delete</span>
        </div>
      `;

      cell.appendChild(menu);
      activeMenu = menu;

      // Close menu when clicking outside
      setTimeout(() => {
        document.addEventListener('click', closeServiceMenu);
      }, 0);
    }

    function closeServiceMenu() {
      if (activeMenu) {
        activeMenu.remove();
        activeMenu = null;
        document.removeEventListener('click', closeServiceMenu);
      }
    }

    function viewServiceDetail(serviceId) {
      closeServiceMenu();
      window.location.href = `/service-detail?id=${serviceId}`;
    }

    function editService(serviceId) {
      closeServiceMenu();
      window.location.href = `/service-edit?id=${serviceId}`;
    }

    function editServiceTags(serviceId) {
      closeServiceMenu();
      alert('Edit tags functionality coming soon');
    }

    function duplicateService(serviceId) {
      closeServiceMenu();
      alert('Duplicate service functionality coming soon');
    }

    function moveToCategory(serviceId) {
      closeServiceMenu();
      alert('Move to category functionality coming soon');
    }

    function removeFromCategory(serviceId) {
      closeServiceMenu();
      if (confirm('Remove this service from its category?')) {
        // TODO: Implement API call to remove category
        alert('Remove from category functionality coming soon');
      }
    }

    function deleteService(serviceId) {
      closeServiceMenu();
      if (confirm('Are you sure you want to delete this service? This action cannot be undone.')) {
        // TODO: Implement API call to delete service
        alert('Delete service functionality coming soon');
      }
    }

    // Tab navigation
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        const tab = btn.dataset.tab;
        if (tab === 'categories') {
          alert('Categories tab coming soon');
        } else if (tab === 'addons') {
          alert('Add-ons tab coming soon');
        } else if (tab === 'price-levels') {
          alert('Price levels tab coming soon');
        }
      });
    });

    // Load on page ready
    loadServices();
  </script>
</body>
</html>
